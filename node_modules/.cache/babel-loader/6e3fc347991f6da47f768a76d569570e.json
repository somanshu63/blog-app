{"ast":null,"code":"import _defineProperty from\"/home/somanshu/Desktop/altcampus/REACT/blog-app/blog-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _classCallCheck from\"/home/somanshu/Desktop/altcampus/REACT/blog-app/blog-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/somanshu/Desktop/altcampus/REACT/blog-app/blog-app/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/home/somanshu/Desktop/altcampus/REACT/blog-app/blog-app/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/somanshu/Desktop/altcampus/REACT/blog-app/blog-app/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from\"react\";import{NavLink,withRouter}from\"react-router-dom\";import validate from\"../utils/validate\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Login=/*#__PURE__*/function(_React$Component){_inherits(Login,_React$Component);var _super=_createSuper(Login);function Login(){var _this;_classCallCheck(this,Login);_this=_super.call(this);_this.handleInput=function(_ref){var target=_ref.target;var name=target.name,value=target.value;var errors=_this.state.errors;validate(errors,name,value);_this.setState(_defineProperty({errors:errors},name,value));};_this.checkInput=function(){if(!_this.state.email||!_this.state.password){_this.setState({errors:{email:\"required email/password\"}});}};_this.login=function(){fetch(\"/api/users/login\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({user:{email:\"\".concat(_this.state.email),password:\"\".concat(_this.state.password)}})}).then(function(res){if(!res.ok){_this.setState({loading:false});return res.json().then(function(_ref2){var errors=_ref2.errors;return Promise.reject(errors);});}return res.json();}).then(function(user){localStorage.setItem(\"userToken\",JSON.stringify(user.user.token));_this.props.handleLogIn(user.user);_this.props.history.push(\"/\");}).catch(function(errors){console.log(errors);_this.setState({errors:{email:\"invalid\"}});});};_this.state={email:null,password:null,loading:false,errors:{password:\"\",email:\"\"}};return _this;}_createClass(Login,[{key:\"render\",value:function render(){var _this2=this;var _this$state$errors=this.state.errors,email=_this$state$errors.email,password=_this$state$errors.password;var _this$state=this.state,Email=_this$state.Email,Password=_this$state.Password;return/*#__PURE__*/_jsx(_Fragment,{children:this.state.loading?/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\" loader m-12\"})}):/*#__PURE__*/_jsxs(\"div\",{className:\"login flex-col p-12 flex justify-center items-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl p-2 blue\",children:\"Login\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-row\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-lg\",children:\"Don't have account?\"}),/*#__PURE__*/_jsx(NavLink,{to:\"/signup\",className:\"text-green-500 text-xl underline px-2\",children:\"Sign up\"})]}),/*#__PURE__*/_jsxs(\"form\",{className:\"flex flex-col\",onSubmit:function onSubmit(event){event.preventDefault();_this2.checkInput();_this2.setState({loading:true});_this2.login();},children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-red-600 py-1\",children:email}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Enter Email\",onChange:this.handleInput,className:\"text-lg rounded-md w-70 py-1 px-4 my-2 border-2 border-solid border-blue-900 text-blue-900\",type:\"text\",name:\"email\",value:Email}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-red-600 py-1\",children:password}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Enter Password\",onChange:this.handleInput,type:\"password\",name:\"password\",value:Password,className:\"text-lg rounded-md w-70 py-1 px-4 my-2 border-2 border-solid border-blue-900 text-blue-900\"}),/*#__PURE__*/_jsx(\"input\",{className:\"text-lg cursor-pointer rounded-md w-70 py-1 px-4 my-2 border-2 border-solid \".concat(!this.state.email||!this.state.password?\"border-red-500 text-red-500 bg-red-300\":\"border-green-700 text-green-700 bg-green-200\"),type:\"submit\",value:\"Login\",disabled:email||password})]})]})});}}]);return Login;}(React.Component);export default withRouter(Login);","map":{"version":3,"names":["React","NavLink","withRouter","validate","Login","handleInput","target","name","value","errors","state","setState","checkInput","email","password","login","fetch","method","headers","body","JSON","stringify","user","then","res","ok","loading","json","Promise","reject","localStorage","setItem","token","props","handleLogIn","history","push","catch","console","log","Email","Password","event","preventDefault","Component"],"sources":["/home/somanshu/Desktop/altcampus/REACT/blog-app/blog-app/src/components/login.js"],"sourcesContent":["import React from \"react\";\nimport { NavLink, withRouter } from \"react-router-dom\";\nimport validate from \"../utils/validate\";\n\nclass Login extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      email: null,\n      password: null,\n      loading: false,\n      errors: {\n        password: \"\",\n        email: \"\",\n      },\n    };\n  }\n\n  handleInput = ({ target }) => {\n    var { name, value } = target;\n    let errors = this.state.errors;\n    validate(errors, name, value);\n    this.setState({\n      errors,\n      [name]: value,\n    });\n  };\n  checkInput = () => {\n    if (!this.state.email || !this.state.password) {\n      this.setState({\n        errors: {\n          email: \"required email/password\",\n        },\n      });\n    }\n  };\n  login = () => {\n    fetch(`/api/users/login`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        user: {\n          email: `${this.state.email}`,\n          password: `${this.state.password}`,\n        },\n      }),\n    })\n      .then((res) => {\n        if (!res.ok) {\n          this.setState({\n            loading: false,\n          });\n          return res.json().then(({ errors }) => {\n            return Promise.reject(errors);\n          });\n        }\n        return res.json();\n      })\n      .then((user) => {\n        localStorage.setItem(\"userToken\", JSON.stringify(user.user.token));\n        this.props.handleLogIn(user.user);\n        this.props.history.push(\"/\");\n      })\n      .catch((errors) => {\n        console.log(errors);\n        this.setState({\n          errors: {\n            email: \"invalid\",\n          },\n        });\n      });\n  };\n  render() {\n    let { email, password } = this.state.errors;\n    let { Email, Password } = this.state;\n    return (\n      <>\n        {this.state.loading ? (\n          <div className=\"flex justify-center\">\n            <div className=\" loader m-12\"></div>\n          </div>\n        ) : (\n          <div className=\"login flex-col p-12 flex justify-center items-center\">\n            <h2 className=\"text-2xl p-2 blue\">Login</h2>\n            <div className=\"flex flex-row\">\n              <p className=\"text-red-500 text-lg\">Don't have account?</p>\n              <NavLink\n                to=\"/signup\"\n                className={\"text-green-500 text-xl underline px-2\"}\n              >\n                Sign up\n              </NavLink>\n            </div>\n            <form\n              className=\"flex flex-col\"\n              onSubmit={(event) => {\n                event.preventDefault();\n                this.checkInput();\n                this.setState({\n                  loading: true,\n                });\n                this.login();\n              }}\n            >\n              <span className=\"text-xs text-red-600 py-1\">{email}</span>\n              <input\n                placeholder=\"Enter Email\"\n                onChange={this.handleInput}\n                className=\"text-lg rounded-md w-70 py-1 px-4 my-2 border-2 border-solid border-blue-900 text-blue-900\"\n                type=\"text\"\n                name=\"email\"\n                value={Email}\n              ></input>\n              <span className=\"text-xs text-red-600 py-1\">{password}</span>\n              <input\n                placeholder=\"Enter Password\"\n                onChange={this.handleInput}\n                type=\"password\"\n                name=\"password\"\n                value={Password}\n                className=\"text-lg rounded-md w-70 py-1 px-4 my-2 border-2 border-solid border-blue-900 text-blue-900\"\n              ></input>\n              <input\n                className={`text-lg cursor-pointer rounded-md w-70 py-1 px-4 my-2 border-2 border-solid ${\n                  !this.state.email || !this.state.password\n                    ? \"border-red-500 text-red-500 bg-red-300\"\n                    : \"border-green-700 text-green-700 bg-green-200\"\n                }`}\n                type=\"submit\"\n                value=\"Login\"\n                disabled={email || password}\n              ></input>\n            </form>\n          </div>\n        )}\n      </>\n    );\n  }\n}\nexport default withRouter(Login);\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}