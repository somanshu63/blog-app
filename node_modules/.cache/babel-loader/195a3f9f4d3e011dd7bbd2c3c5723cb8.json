{"ast":null,"code":"import _defineProperty from\"/home/somanshu/Desktop/altcampus/REACT/blog-app/blog-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _classCallCheck from\"/home/somanshu/Desktop/altcampus/REACT/blog-app/blog-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/somanshu/Desktop/altcampus/REACT/blog-app/blog-app/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/home/somanshu/Desktop/altcampus/REACT/blog-app/blog-app/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/somanshu/Desktop/altcampus/REACT/blog-app/blog-app/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from\"react\";import ArticlesFeed from\"./articlesFeed\";import Feed from\"./feed\";import fetchData from\"../utils/fetchData\";import HeroProfile from\"./heroProfile\";import{withRouter}from\"react-router-dom\";import Loader from\"./loader\";import baseurl from\"../utils/constants\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var url;var Profile=/*#__PURE__*/function(_React$Component){_inherits(Profile,_React$Component);var _super=_createSuper(Profile);function Profile(){var _this;_classCallCheck(this,Profile);_this=_super.call(this);_this.fetch=function(url){fetch(url).then(function(res){return res.json();}).then(function(data){_this.setState({currentUsername:_this.props.match.params.username,currentUser:_this.props.user,user:data.profile},function(){fetchData(_this.state.myfeed?\"&author=\".concat(_this.state.user.username):\"&favorited=\".concat(_this.state.user.username),0,_this.handleState,_this.props.user.token);});});};_this.handleState=function(key,value){_this.setState(_defineProperty({},key,value),function(){if(key===\"myfeed\"){fetchData(_this.state.myfeed?\"&author=\".concat(_this.state.user.username):\"&favorited=\".concat(_this.state.user.username),0,_this.handleState,_this.props.user.token);}});};_this.state={articles:null,articlesCount:null,currentUser:\"\",myfeed:true,user:\"\",error:null,currentUsername:\"\"};return _this;}_createClass(Profile,[{key:\"componentDidMount\",value:function componentDidMount(){url=\"\".concat(baseurl,\"/api/profiles/\").concat(this.props.match.params.username);this.fetch(url);}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){if(this.props.match.params.username!==this.state.currentUsername){url=\"\".concat(baseurl,\"/api/profiles/\").concat(this.props.match.params.username);this.fetch(url);}}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(_Fragment,{children:this.state.loading?/*#__PURE__*/_jsx(Loader,{}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(HeroProfile,{user:this.state.user,currentUser:this.state.currentUser,follow:this.state.currentUser?this.state.user.username!==this.state.currentUser.username:\"\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"w-3/5 mx-auto\",children:[/*#__PURE__*/_jsx(Feed,{myfeed:this.state.myfeed,author:true,myArticles:true,favouritedFeed:true,handleState:this.handleState}),/*#__PURE__*/_jsx(ArticlesFeed,{handleState:this.handleState,myfeed:this.state.myfeed,user:this.props.user,error:this.state.error,articles:this.state.articles,openTag:this.state.openTag})]})]})});}}]);return Profile;}(React.Component);export default withRouter(Profile);","map":{"version":3,"names":["React","ArticlesFeed","Feed","fetchData","HeroProfile","withRouter","Loader","baseurl","url","Profile","fetch","then","res","json","data","setState","currentUsername","props","match","params","username","currentUser","user","profile","state","myfeed","handleState","token","key","value","articles","articlesCount","error","loading","openTag","Component"],"sources":["/home/somanshu/Desktop/altcampus/REACT/blog-app/blog-app/src/components/profile.js"],"sourcesContent":["import React from \"react\";\nimport ArticlesFeed from \"./articlesFeed\";\nimport Feed from \"./feed\";\nimport fetchData from \"../utils/fetchData\";\nimport HeroProfile from \"./heroProfile\";\nimport { withRouter } from \"react-router-dom\";\nimport Loader from \"./loader\";\nimport baseurl from \"../utils/constants\";\nlet url;\n\nclass Profile extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      articles: null,\n      articlesCount: null,\n      currentUser: \"\",\n      myfeed: true,\n      user: \"\",\n      error: null,\n      currentUsername: \"\",\n    };\n  }\n  componentDidMount() {\n    url = `${baseurl}/api/profiles/${this.props.match.params.username}`;\n    this.fetch(url);\n  }\n  componentDidUpdate() {\n    if (this.props.match.params.username !== this.state.currentUsername) {\n      url = `${baseurl}/api/profiles/${this.props.match.params.username}`;\n      this.fetch(url);\n    }\n  }\n  fetch = (url) => {\n    fetch(url)\n      .then((res) => res.json())\n      .then((data) => {\n        this.setState(\n          {\n            currentUsername: this.props.match.params.username,\n            currentUser: this.props.user,\n            user: data.profile,\n          },\n          () => {\n            fetchData(\n              this.state.myfeed\n                ? `&author=${this.state.user.username}`\n                : `&favorited=${this.state.user.username}`,\n              0,\n              this.handleState,\n              this.props.user.token\n            );\n          }\n        );\n      });\n  };\n\n  handleState = (key, value) => {\n    this.setState(\n      {\n        [key]: value,\n      },\n      () => {\n        if (key === \"myfeed\") {\n          fetchData(\n            this.state.myfeed\n              ? `&author=${this.state.user.username}`\n              : `&favorited=${this.state.user.username}`,\n            0,\n            this.handleState,\n            this.props.user.token\n          );\n        }\n      }\n    );\n  };\n  render() {\n    return (\n      <>\n        {this.state.loading ? (\n          <Loader />\n        ) : (\n          <div>\n            <HeroProfile\n              user={this.state.user}\n              currentUser={this.state.currentUser}\n              follow={\n                this.state.currentUser\n                  ? this.state.user.username !== this.state.currentUser.username\n                  : \"\"\n              }\n            />\n            <div className=\"w-3/5 mx-auto\">\n              <Feed\n                myfeed={this.state.myfeed}\n                author={true}\n                myArticles={true}\n                favouritedFeed={true}\n                handleState={this.handleState}\n              />\n              <ArticlesFeed\n                handleState={this.handleState}\n                myfeed={this.state.myfeed}\n                user={this.props.user}\n                error={this.state.error}\n                articles={this.state.articles}\n                openTag={this.state.openTag}\n              />\n            </div>\n          </div>\n        )}\n      </>\n    );\n  }\n}\n\nexport default withRouter(Profile);\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}