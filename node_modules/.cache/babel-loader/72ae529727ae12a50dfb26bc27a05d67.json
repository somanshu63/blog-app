{"ast":null,"code":"import _defineProperty from\"/home/somanshu/Desktop/altcampus/REACT/blog-app/blog-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _classCallCheck from\"/home/somanshu/Desktop/altcampus/REACT/blog-app/blog-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/somanshu/Desktop/altcampus/REACT/blog-app/blog-app/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/home/somanshu/Desktop/altcampus/REACT/blog-app/blog-app/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/somanshu/Desktop/altcampus/REACT/blog-app/blog-app/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from\"react\";import{withRouter}from\"react-router-dom\";import baseurl from\"../utils/constants\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var NewPost=/*#__PURE__*/function(_React$Component){_inherits(NewPost,_React$Component);var _super=_createSuper(NewPost);function NewPost(){var _this;_classCallCheck(this,NewPost);_this=_super.call(this);_this.handleInput=function(_ref){var target=_ref.target;var name=target.name,value=target.value;_this.setState(_defineProperty({},name,value));};_this.checkInput=function(){var _this$state=_this.state,title=_this$state.title,description=_this$state.description,tags=_this$state.tags,body=_this$state.body;if(!title||!description||!tags||!body){_this.setState({error:\"all fields are required*\"});}else{_this.addArticle();}};_this.addArticle=function(){var _this$state2=_this.state,title=_this$state2.title,description=_this$state2.description,tags=_this$state2.tags,body=_this$state2.body;fetch(\"\".concat(baseurl,\"/api/articles\"),{method:\"POST\",headers:{\"Content-Type\":\"application/json\",authorization:\"\".concat(_this.props.token)},body:JSON.stringify({article:{title:title,description:description,body:body,taglist:tags.split(\",\").map(function(tag){return tag.trim();})}})}).then(function(res){if(!res.ok){throw new Error(\"cant create new article\");}return res.json();}).then(function(article){_this.props.history.push(\"/articles/\".concat(article.article.article.slug));}).catch(function(errors){_this.setState({error:errors.error});});};_this.state={title:\"\",description:\"\",body:\"\",tags:\"\",error:\"\"};return _this;}_createClass(NewPost,[{key:\"render\",value:function render(){var _this2=this;var _this$state3=this.state,title=_this$state3.title,description=_this$state3.description,tags=_this$state3.tags,body=_this$state3.body;var formControlClass=\"text-lg rounded-md w-full py-1 px-4 my-2 border-2 border-solid border-blue-900 text-blue-900\";return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-creme pb-28\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"capitalize text-2xl text-center p-4 blue \",children:\"add article\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center mx-auto w-3/5\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:function onSubmit(event){event.preventDefault();_this2.checkInput();},children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-red-600\",children:this.state.error?this.state.error:\"\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Enter Article Title\",onChange:this.handleInput,className:formControlClass,type:\"text\",name:\"title\",value:title}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"What's this article is about?\",onChange:this.handleInput,className:formControlClass,type:\"text\",name:\"description\",value:description}),/*#__PURE__*/_jsx(\"textarea\",{className:formControlClass,placeholder:\"Write your article\",rows:6,onChange:this.handleInput,value:body,name:\"body\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Enter tags\",onChange:this.handleInput,className:formControlClass,type:\"text\",name:\"tags\",value:tags}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Add Article\",className:\"\".concat(formControlClass).concat(!title||!description||!tags||!body?\" text-red-700 border-red-700 bg-red-300\":\" text-green-700 border-green-700 bg-green-300\")})]})})]});}}]);return NewPost;}(React.Component);export default withRouter(NewPost);","map":{"version":3,"names":["React","withRouter","baseurl","NewPost","handleInput","target","name","value","setState","checkInput","state","title","description","tags","body","error","addArticle","fetch","method","headers","authorization","props","token","JSON","stringify","article","taglist","split","map","tag","trim","then","res","ok","Error","json","history","push","slug","catch","errors","formControlClass","event","preventDefault","Component"],"sources":["/home/somanshu/Desktop/altcampus/REACT/blog-app/blog-app/src/components/newPost.js"],"sourcesContent":["import React from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport baseurl from \"../utils/constants\";\n\nclass NewPost extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      title: \"\",\n      description: \"\",\n      body: \"\",\n      tags: \"\",\n      error: \"\",\n    };\n  }\n  handleInput = ({ target }) => {\n    let { name, value } = target;\n    this.setState({\n      [name]: value,\n    });\n  };\n  checkInput = () => {\n    let { title, description, tags, body } = this.state;\n    if (!title || !description || !tags || !body) {\n      this.setState({\n        error: \"all fields are required*\",\n      });\n    } else {\n      this.addArticle();\n    }\n  };\n  addArticle = () => {\n    let { title, description, tags, body } = this.state;\n    fetch(`${baseurl}/api/articles`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        authorization: `${this.props.token}`,\n      },\n      body: JSON.stringify({\n        article: {\n          title: title,\n          description: description,\n          body: body,\n          taglist: tags.split(\",\").map((tag) => tag.trim()),\n        },\n      }),\n    })\n      .then((res) => {\n        if (!res.ok) {\n          throw new Error(\"cant create new article\");\n        }\n        return res.json();\n      })\n      .then((article) => {\n        this.props.history.push(`/articles/${article.article.article.slug}`);\n      })\n      .catch((errors) => {\n        this.setState({\n          error: errors.error,\n        });\n      });\n  };\n  render() {\n    let { title, description, tags, body } = this.state;\n    let formControlClass =\n      \"text-lg rounded-md w-full py-1 px-4 my-2 border-2 border-solid border-blue-900 text-blue-900\";\n    return (\n      <div className=\"bg-creme pb-28\">\n        <h2 className=\"capitalize text-2xl text-center p-4 blue \">\n          add article\n        </h2>\n        <div className=\"text-center mx-auto w-3/5\">\n          <form\n            onSubmit={(event) => {\n              event.preventDefault();\n              this.checkInput();\n            }}\n          >\n            <span className=\"text-red-600\">\n              {this.state.error ? this.state.error : \"\"}\n            </span>\n            <input\n              placeholder=\"Enter Article Title\"\n              onChange={this.handleInput}\n              className={formControlClass}\n              type=\"text\"\n              name=\"title\"\n              value={title}\n            ></input>\n            <input\n              placeholder=\"What's this article is about?\"\n              onChange={this.handleInput}\n              className={formControlClass}\n              type=\"text\"\n              name=\"description\"\n              value={description}\n            ></input>\n            <textarea\n              className={formControlClass}\n              placeholder=\"Write your article\"\n              rows={6}\n              onChange={this.handleInput}\n              value={body}\n              name=\"body\"\n            ></textarea>\n            <input\n              placeholder=\"Enter tags\"\n              onChange={this.handleInput}\n              className={formControlClass}\n              type=\"text\"\n              name=\"tags\"\n              value={tags}\n            ></input>\n            <input\n              type=\"submit\"\n              value=\"Add Article\"\n              className={`${formControlClass}${\n                !title || !description || !tags || !body\n                  ? ` text-red-700 border-red-700 bg-red-300`\n                  : ` text-green-700 border-green-700 bg-green-300`\n              }`}\n            ></input>\n          </form>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default withRouter(NewPost);\n"],"mappings":"wrBAAA,MAAOA,MAAK,KAAM,OAAO,CACzB,OAASC,UAAU,KAAQ,kBAAkB,CAC7C,MAAOC,QAAO,KAAM,oBAAoB,CAAC,2FAEnCC,QAAO,8GACX,kBAAc,yCACZ,wBAAQ,MASVC,WAAW,CAAG,cAAgB,IAAbC,OAAM,MAANA,MAAM,CACrB,GAAMC,KAAI,CAAYD,MAAM,CAAtBC,IAAI,CAAEC,KAAK,CAAKF,MAAM,CAAhBE,KAAK,CACjB,MAAKC,QAAQ,oBACVF,IAAI,CAAGC,KAAK,EACb,CACJ,CAAC,OACDE,UAAU,CAAG,UAAM,CACjB,gBAAyC,MAAKC,KAAK,CAA7CC,KAAK,aAALA,KAAK,CAAEC,WAAW,aAAXA,WAAW,CAAEC,IAAI,aAAJA,IAAI,CAAEC,IAAI,aAAJA,IAAI,CACpC,GAAI,CAACH,KAAK,EAAI,CAACC,WAAW,EAAI,CAACC,IAAI,EAAI,CAACC,IAAI,CAAE,CAC5C,MAAKN,QAAQ,CAAC,CACZO,KAAK,CAAE,0BACT,CAAC,CAAC,CACJ,CAAC,IAAM,CACL,MAAKC,UAAU,EAAE,CACnB,CACF,CAAC,OACDA,UAAU,CAAG,UAAM,CACjB,iBAAyC,MAAKN,KAAK,CAA7CC,KAAK,cAALA,KAAK,CAAEC,WAAW,cAAXA,WAAW,CAAEC,IAAI,cAAJA,IAAI,CAAEC,IAAI,cAAJA,IAAI,CACpCG,KAAK,WAAIf,OAAO,kBAAiB,CAC/BgB,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACP,cAAc,CAAE,kBAAkB,CAClCC,aAAa,WAAK,MAAKC,KAAK,CAACC,KAAK,CACpC,CAAC,CACDR,IAAI,CAAES,IAAI,CAACC,SAAS,CAAC,CACnBC,OAAO,CAAE,CACPd,KAAK,CAAEA,KAAK,CACZC,WAAW,CAAEA,WAAW,CACxBE,IAAI,CAAEA,IAAI,CACVY,OAAO,CAAEb,IAAI,CAACc,KAAK,CAAC,GAAG,CAAC,CAACC,GAAG,CAAC,SAACC,GAAG,QAAKA,IAAG,CAACC,IAAI,EAAE,GAClD,CACF,CAAC,CACH,CAAC,CAAC,CACCC,IAAI,CAAC,SAACC,GAAG,CAAK,CACb,GAAI,CAACA,GAAG,CAACC,EAAE,CAAE,CACX,KAAM,IAAIC,MAAK,CAAC,yBAAyB,CAAC,CAC5C,CACA,MAAOF,IAAG,CAACG,IAAI,EAAE,CACnB,CAAC,CAAC,CACDJ,IAAI,CAAC,SAACN,OAAO,CAAK,CACjB,MAAKJ,KAAK,CAACe,OAAO,CAACC,IAAI,qBAAcZ,OAAO,CAACA,OAAO,CAACA,OAAO,CAACa,IAAI,EAAG,CACtE,CAAC,CAAC,CACDC,KAAK,CAAC,SAACC,MAAM,CAAK,CACjB,MAAKhC,QAAQ,CAAC,CACZO,KAAK,CAAEyB,MAAM,CAACzB,KAChB,CAAC,CAAC,CACJ,CAAC,CAAC,CACN,CAAC,CAvDC,MAAKL,KAAK,CAAG,CACXC,KAAK,CAAE,EAAE,CACTC,WAAW,CAAE,EAAE,CACfE,IAAI,CAAE,EAAE,CACRD,IAAI,CAAE,EAAE,CACRE,KAAK,CAAE,EACT,CAAC,CAAC,aACJ,CAAC,0CAiDD,iBAAS,iBACP,iBAAyC,IAAI,CAACL,KAAK,CAA7CC,KAAK,cAALA,KAAK,CAAEC,WAAW,cAAXA,WAAW,CAAEC,IAAI,cAAJA,IAAI,CAAEC,IAAI,cAAJA,IAAI,CACpC,GAAI2B,iBAAgB,CAClB,8FAA8F,CAChG,mBACE,aAAK,SAAS,CAAC,gBAAgB,wBAC7B,WAAI,SAAS,CAAC,2CAA2C,yBAEpD,cACL,YAAK,SAAS,CAAC,2BAA2B,uBACxC,cACE,QAAQ,CAAE,kBAACC,KAAK,CAAK,CACnBA,KAAK,CAACC,cAAc,EAAE,CACtB,MAAI,CAAClC,UAAU,EAAE,CACnB,CAAE,wBAEF,aAAM,SAAS,CAAC,cAAc,UAC3B,IAAI,CAACC,KAAK,CAACK,KAAK,CAAG,IAAI,CAACL,KAAK,CAACK,KAAK,CAAG,EAAE,EACpC,cACP,cACE,WAAW,CAAC,qBAAqB,CACjC,QAAQ,CAAE,IAAI,CAACX,WAAY,CAC3B,SAAS,CAAEqC,gBAAiB,CAC5B,IAAI,CAAC,MAAM,CACX,IAAI,CAAC,OAAO,CACZ,KAAK,CAAE9B,KAAM,EACN,cACT,cACE,WAAW,CAAC,+BAA+B,CAC3C,QAAQ,CAAE,IAAI,CAACP,WAAY,CAC3B,SAAS,CAAEqC,gBAAiB,CAC5B,IAAI,CAAC,MAAM,CACX,IAAI,CAAC,aAAa,CAClB,KAAK,CAAE7B,WAAY,EACZ,cACT,iBACE,SAAS,CAAE6B,gBAAiB,CAC5B,WAAW,CAAC,oBAAoB,CAChC,IAAI,CAAE,CAAE,CACR,QAAQ,CAAE,IAAI,CAACrC,WAAY,CAC3B,KAAK,CAAEU,IAAK,CACZ,IAAI,CAAC,MAAM,EACD,cACZ,cACE,WAAW,CAAC,YAAY,CACxB,QAAQ,CAAE,IAAI,CAACV,WAAY,CAC3B,SAAS,CAAEqC,gBAAiB,CAC5B,IAAI,CAAC,MAAM,CACX,IAAI,CAAC,MAAM,CACX,KAAK,CAAE5B,IAAK,EACL,cACT,cACE,IAAI,CAAC,QAAQ,CACb,KAAK,CAAC,aAAa,CACnB,SAAS,WAAK4B,gBAAgB,SAC5B,CAAC9B,KAAK,EAAI,CAACC,WAAW,EAAI,CAACC,IAAI,EAAI,CAACC,IAAI,0FAEW,CAClD,EACI,GACJ,EACH,GACF,CAEV,CAAC,qBA3HmBd,KAAK,CAAC4C,SAAS,EA8HrC,cAAe3C,WAAU,CAACE,OAAO,CAAC"},"metadata":{},"sourceType":"module"}