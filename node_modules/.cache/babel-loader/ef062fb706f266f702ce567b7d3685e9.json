{"ast":null,"code":"import _defineProperty from\"/home/somanshu/Desktop/altcampus/REACT/blog-app/blog-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _classCallCheck from\"/home/somanshu/Desktop/altcampus/REACT/blog-app/blog-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/somanshu/Desktop/altcampus/REACT/blog-app/blog-app/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/home/somanshu/Desktop/altcampus/REACT/blog-app/blog-app/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/somanshu/Desktop/altcampus/REACT/blog-app/blog-app/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from\"react\";import{withRouter}from\"react-router-dom\";import baseurl from\"../utils/constants\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var EditArticle=/*#__PURE__*/function(_React$Component){_inherits(EditArticle,_React$Component);var _super=_createSuper(EditArticle);function EditArticle(){var _this;_classCallCheck(this,EditArticle);_this=_super.call(this);_this.handleInput=function(_ref){var target=_ref.target;var name=target.name,value=target.value;_this.setState(_defineProperty({},name,value));};_this.checkInput=function(){var _this$state=_this.state,title=_this$state.title,description=_this$state.description,tags=_this$state.tags,body=_this$state.body;if(!title||!description||!tags||!body){_this.setState({error:\"all fields are required*\"});}};_this.editArticle=function(){var _this$state2=_this.state,title=_this$state2.title,description=_this$state2.description,tags=_this$state2.tags,body=_this$state2.body;fetch(\"\".concat(baseurl,\"/api/articles/\").concat(_this.props.location.state.article.slug),{method:\"PUT\",headers:{\"Content-Type\":\"application/json\",authorization:\"\".concat(_this.props.user.token)},body:JSON.stringify({article:{title:title,description:description,body:body,taglist:tags}})}).then(function(res){if(!res.ok){throw new Error(\"can't edit article\");}return res.json();}).then(function(article){_this.props.history.push(\"/articles/\".concat(article.article.article.slug));}).catch(function(errors){_this.setState({error:errors.error});});};_this.state={title:\"\",description:\"\",body:\"\",tags:\"\",error:\"\"};return _this;}_createClass(EditArticle,[{key:\"componentDidMount\",value:function componentDidMount(){var _this$props$location$=this.props.location.state.article,title=_this$props$location$.title,description=_this$props$location$.description,body=_this$props$location$.body,taglist=_this$props$location$.taglist;this.setState({title:title,description:description,tags:taglist?taglist.toString():\"\",body:body});}},{key:\"render\",value:function render(){var _this2=this;var _this$state3=this.state,title=_this$state3.title,description=_this$state3.description,tags=_this$state3.tags,body=_this$state3.body;var formControlClass=\"text-lg rounded-md w-full py-1 px-4 my-2 border-2 border-solid border-blue-900 text-blue-900\";return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-creme pb-28\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"capitalize text-2xl text-center p-4 blue \",children:\"edit article\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center mx-auto w-3/5\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:function onSubmit(event){event.preventDefault();_this2.checkInput();_this2.editArticle();},children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-red-600\",children:this.state.error?this.state.error:\"\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Enter Article Title\",onChange:this.handleInput,className:formControlClass,type:\"text\",name:\"title\",value:title}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"What's this article is about?\",onChange:this.handleInput,className:formControlClass,type:\"text\",name:\"description\",value:description}),/*#__PURE__*/_jsx(\"textarea\",{className:formControlClass,placeholder:\"Write your article\",rows:6,onChange:this.handleInput,value:body,name:\"body\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Enter tags\",onChange:this.handleInput,className:formControlClass,type:\"text\",name:\"tags\",value:tags}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Update Article\",className:\"bg-blue-300 blue \".concat(formControlClass,\" cursor-pointer\")})]})})]});}}]);return EditArticle;}(React.Component);export default withRouter(EditArticle);","map":{"version":3,"names":["React","withRouter","baseurl","EditArticle","handleInput","target","name","value","setState","checkInput","state","title","description","tags","body","error","editArticle","fetch","props","location","article","slug","method","headers","authorization","user","token","JSON","stringify","taglist","then","res","ok","Error","json","history","push","catch","errors","toString","formControlClass","event","preventDefault","Component"],"sources":["/home/somanshu/Desktop/altcampus/REACT/blog-app/blog-app/src/components/editArticle.js"],"sourcesContent":["import React from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport baseurl from \"../utils/constants\";\n\nclass EditArticle extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      title: \"\",\n      description: \"\",\n      body: \"\",\n      tags: \"\",\n      error: \"\",\n    };\n  }\n  handleInput = ({ target }) => {\n    let { name, value } = target;\n    this.setState({\n      [name]: value,\n    });\n  };\n  checkInput = () => {\n    let { title, description, tags, body } = this.state;\n    if (!title || !description || !tags || !body) {\n      this.setState({\n        error: \"all fields are required*\",\n      });\n    }\n  };\n  editArticle = () => {\n    let { title, description, tags, body } = this.state;\n    fetch(`${baseurl}/api/articles/${this.props.location.state.article.slug}`, {\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        authorization: `${this.props.user.token}`,\n      },\n      body: JSON.stringify({\n        article: {\n          title: title,\n          description: description,\n          body: body,\n          taglist: tags,\n        },\n      }),\n    })\n      .then((res) => {\n        if (!res.ok) {\n          throw new Error(\"can't edit article\");\n        }\n        return res.json();\n      })\n      .then((article) => {\n        this.props.history.push(`/articles/${article.article.article.slug}`);\n      })\n      .catch((errors) => {\n        this.setState({\n          error: errors.error,\n        });\n      });\n  };\n  componentDidMount() {\n    let { title, description, body, taglist } =\n      this.props.location.state.article;\n    this.setState({\n      title: title,\n      description: description,\n      tags: taglist ? taglist.toString() : \"\",\n      body: body,\n    });\n  }\n  render() {\n    let { title, description, tags, body } = this.state;\n    let formControlClass =\n      \"text-lg rounded-md w-full py-1 px-4 my-2 border-2 border-solid border-blue-900 text-blue-900\";\n    return (\n      <div className=\"bg-creme pb-28\">\n        <h2 className=\"capitalize text-2xl text-center p-4 blue \">\n          edit article\n        </h2>\n        <div className=\"text-center mx-auto w-3/5\">\n          <form\n            onSubmit={(event) => {\n              event.preventDefault();\n              this.checkInput();\n              this.editArticle();\n            }}\n          >\n            <span className=\"text-red-600\">\n              {this.state.error ? this.state.error : \"\"}\n            </span>\n            <input\n              placeholder=\"Enter Article Title\"\n              onChange={this.handleInput}\n              className={formControlClass}\n              type=\"text\"\n              name=\"title\"\n              value={title}\n            ></input>\n            <input\n              placeholder=\"What's this article is about?\"\n              onChange={this.handleInput}\n              className={formControlClass}\n              type=\"text\"\n              name=\"description\"\n              value={description}\n            ></input>\n            <textarea\n              className={formControlClass}\n              placeholder=\"Write your article\"\n              rows={6}\n              onChange={this.handleInput}\n              value={body}\n              name=\"body\"\n            ></textarea>\n            <input\n              placeholder=\"Enter tags\"\n              onChange={this.handleInput}\n              className={formControlClass}\n              type=\"text\"\n              name=\"tags\"\n              value={tags}\n            ></input>\n            <input\n              type=\"submit\"\n              value=\"Update Article\"\n              className={`bg-blue-300 blue ${formControlClass} cursor-pointer`}\n            ></input>\n          </form>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default withRouter(EditArticle);\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}