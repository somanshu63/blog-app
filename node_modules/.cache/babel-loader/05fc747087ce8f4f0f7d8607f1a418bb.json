{"ast":null,"code":"import _defineProperty from\"/home/somanshu/Desktop/altcampus/REACT/blog-app/blog-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _classCallCheck from\"/home/somanshu/Desktop/altcampus/REACT/blog-app/blog-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/somanshu/Desktop/altcampus/REACT/blog-app/blog-app/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/home/somanshu/Desktop/altcampus/REACT/blog-app/blog-app/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/somanshu/Desktop/altcampus/REACT/blog-app/blog-app/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from\"react\";import{NavLink,withRouter}from\"react-router-dom\";import baseurl from\"../utils/constants\";import validate from\"../utils/validate\";import Loading from\"./loading\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Signup=/*#__PURE__*/function(_React$Component){_inherits(Signup,_React$Component);var _super=_createSuper(Signup);function Signup(){var _this;_classCallCheck(this,Signup);_this=_super.call(this);_this.handleInput=function(_ref){var target=_ref.target;var name=target.name,value=target.value;var errors=_this.state.errors;validate(errors,name,value);_this.setState(_defineProperty({errors:errors},name,value));};_this.checkInput=function(){if(!_this.state.username||!_this.state.password||!_this.state.email){_this.setState({errors:{email:\"required email/password/username\"}});}};_this.signUp=function(){fetch(\"\".concat(baseurl,\"/api/users\"),{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({user:{username:\"\".concat(_this.state.username),email:\"\".concat(_this.state.email),password:\"\".concat(_this.state.password)}})}).then(function(res){if(!res.ok){return res.json().then(function(_ref2){var errors=_ref2.errors;return Promise.reject(errors);});}return res.json();}).then(function(user){localStorage.setItem(\"userToken\",JSON.stringify(user.user.token));_this.props.handleLogIn(user.user);_this.props.history.push(\"/\");}).catch(function(errors){_this.setState({errors:errors,loading:false});});};_this.state={username:null,email:null,password:null,loading:false,errors:{username:null,email:null,password:null}};return _this;}_createClass(Signup,[{key:\"render\",value:function render(){var _this2=this;var _this$state$errors=this.state.errors,password=_this$state$errors.password,email=_this$state$errors.email,username=_this$state$errors.username;var _this$state=this.state,Password=_this$state.Password,Email=_this$state.Email,Username=_this$state.Username;return/*#__PURE__*/_jsx(_Fragment,{children:this.state.loading?/*#__PURE__*/_jsx(\"div\",{className:\"h-screen flex items-center justify-center\",children:/*#__PURE__*/_jsx(Loading,{})}):/*#__PURE__*/_jsxs(\"div\",{className:\"login flex-col p-12 flex justify-center items-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl p-2 blue\",children:\"Sign up\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-row\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-green-500 text-lg\",children:\"Already have an account?\"}),/*#__PURE__*/_jsx(NavLink,{to:\"/login\",className:\"text-blue-900 text-xl underline px-2\",children:\"Login\"})]}),/*#__PURE__*/_jsxs(\"form\",{className:\"flex flex-col\",onSubmit:function onSubmit(event){event.preventDefault();_this2.checkInput();_this2.setState({loading:true});_this2.signUp();},children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-red-500\",children:email}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Enter Email\",onChange:this.handleInput,className:\"text-xl rounded-md w-70 py-1 px-4 my-2 border-2 border-solid border-blue-900 text-blue-900\",type:\"text\",name:\"email\",value:Email}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-red-500\",children:password}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Enter Password\",onChange:this.handleInput,type:\"password\",name:\"password\",value:Password,className:\"text-lg rounded-md w-70 py-1 px-4 my-2 border-2 border-solid border-blue-900 text-blue-900\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-red-500\",children:username}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Enter Username\",onChange:this.handleInput,className:\"text-lg rounded-md w-70 py-1 px-4 my-2 border-2 border-solid border-blue-900 text-blue-900\",type:\"text\",name:\"username\",value:Username}),/*#__PURE__*/_jsx(\"input\",{className:\" text-lg cursor-pointer rounded-md w-70 py-1 px-4 my-2 border-2 border-solid  \".concat(!this.state.email||!this.state.password||!this.state.username?\"border-red-500 text-red-500 bg-red-200\":\"border-green-700 text-green-700 bg-green-200\"),type:\"submit\",value:\"Sign up\",disabled:email||password||username})]})]})});}}]);return Signup;}(React.Component);export default withRouter(Signup);","map":{"version":3,"names":["React","NavLink","withRouter","baseurl","validate","Loading","Signup","handleInput","target","name","value","errors","state","setState","checkInput","username","password","email","signUp","fetch","method","headers","body","JSON","stringify","user","then","res","ok","json","Promise","reject","localStorage","setItem","token","props","handleLogIn","history","push","catch","loading","Password","Email","Username","event","preventDefault","Component"],"sources":["/home/somanshu/Desktop/altcampus/REACT/blog-app/blog-app/src/components/signup.js"],"sourcesContent":["import React from \"react\";\nimport { NavLink, withRouter } from \"react-router-dom\";\nimport baseurl from \"../utils/constants\";\nimport validate from \"../utils/validate\";\nimport Loading from \"./loading\";\n\nclass Signup extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      username: null,\n      email: null,\n      password: null,\n      loading: false,\n      errors: {\n        username: null,\n        email: null,\n        password: null,\n      },\n    };\n  }\n  handleInput = ({ target }) => {\n    let { name, value } = target;\n    let errors = this.state.errors;\n    validate(errors, name, value);\n    this.setState({\n      errors,\n      [name]: value,\n    });\n  };\n  checkInput = () => {\n    if (!this.state.username || !this.state.password || !this.state.email) {\n      this.setState({\n        errors: {\n          email: \"required email/password/username\",\n        },\n      });\n    }\n  };\n  signUp = () => {\n    fetch(`${baseurl}/api/users`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        user: {\n          username: `${this.state.username}`,\n          email: `${this.state.email}`,\n          password: `${this.state.password}`,\n        },\n      }),\n    })\n      .then((res) => {\n        if (!res.ok) {\n          return res.json().then(({ errors }) => {\n            return Promise.reject(errors);\n          });\n        }\n        return res.json();\n      })\n      .then((user) => {\n        localStorage.setItem(\"userToken\", JSON.stringify(user.user.token));\n        this.props.handleLogIn(user.user);\n        this.props.history.push(\"/\");\n      })\n      .catch((errors) => {\n        this.setState({ errors, loading: false });\n      });\n  };\n  render() {\n    let { password, email, username } = this.state.errors;\n    let { Password, Email, Username } = this.state;\n    return (\n      <>\n        {this.state.loading ? (\n          <div className=\"h-screen flex items-center justify-center\">\n            <Loading />\n          </div>\n        ) : (\n          <div className=\"login flex-col p-12 flex justify-center items-center\">\n            <h2 className=\"text-2xl p-2 blue\">Sign up</h2>\n            <div className=\"flex flex-row\">\n              <p className=\"text-green-500 text-lg\">Already have an account?</p>\n              <NavLink\n                to=\"/login\"\n                className={\"text-blue-900 text-xl underline px-2\"}\n              >\n                Login\n              </NavLink>\n            </div>\n            <form\n              className=\"flex flex-col\"\n              onSubmit={(event) => {\n                event.preventDefault();\n                this.checkInput();\n                this.setState({\n                  loading: true,\n                });\n                this.signUp();\n              }}\n            >\n              <span className=\"text-xs text-red-500\">{email}</span>\n              <input\n                placeholder=\"Enter Email\"\n                onChange={this.handleInput}\n                className=\"text-xl rounded-md w-70 py-1 px-4 my-2 border-2 border-solid border-blue-900 text-blue-900\"\n                type=\"text\"\n                name=\"email\"\n                value={Email}\n              ></input>\n              <span className=\"text-xs text-red-500\">{password}</span>\n              <input\n                placeholder=\"Enter Password\"\n                onChange={this.handleInput}\n                type=\"password\"\n                name=\"password\"\n                value={Password}\n                className=\"text-lg rounded-md w-70 py-1 px-4 my-2 border-2 border-solid border-blue-900 text-blue-900\"\n              ></input>\n              <span className=\"text-xs text-red-500\">{username}</span>\n              <input\n                placeholder=\"Enter Username\"\n                onChange={this.handleInput}\n                className=\"text-lg rounded-md w-70 py-1 px-4 my-2 border-2 border-solid border-blue-900 text-blue-900\"\n                type=\"text\"\n                name=\"username\"\n                value={Username}\n              ></input>\n              <input\n                className={` text-lg cursor-pointer rounded-md w-70 py-1 px-4 my-2 border-2 border-solid  ${\n                  !this.state.email ||\n                  !this.state.password ||\n                  !this.state.username\n                    ? \"border-red-500 text-red-500 bg-red-200\"\n                    : \"border-green-700 text-green-700 bg-green-200\"\n                }`}\n                type=\"submit\"\n                value=\"Sign up\"\n                disabled={email || password || username}\n              ></input>\n            </form>\n          </div>\n        )}\n      </>\n    );\n  }\n}\nexport default withRouter(Signup);\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}