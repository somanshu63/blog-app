{"ast":null,"code":"import _classCallCheck from\"/home/somanshu/Desktop/altcampus/REACT/blog-app/blog-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/somanshu/Desktop/altcampus/REACT/blog-app/blog-app/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/home/somanshu/Desktop/altcampus/REACT/blog-app/blog-app/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/somanshu/Desktop/altcampus/REACT/blog-app/blog-app/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from\"react\";import{Route,Switch}from\"react-router-dom\";import\"../styles/index.css\";import Header from\"./header\";import Home from\"./home\";import Login from\"./login\";import Signup from\"./signup\";import Article from\"./singleArticle\";import NoMatch from\"./noMatch\";import Loader from\"./loader\";import Profile from\"./profile\";import Settings from\"./settings\";import NewPost from\"./newPost\";import EditArticle from\"./editArticle\";import baseurl from\"../utils/constants\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);var _super=_createSuper(App);function App(){var _this;_classCallCheck(this,App);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={loggedIn:false,user:null,verified:false};_this.handleLogIn=function(user){_this.setState({loggedIn:!_this.state.loggedIn,user:user});};_this.updateUser=function(user){_this.setState({user:user});};return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var token=JSON.parse(localStorage.getItem(\"userToken\"));if(token){this.setState({verified:\"verifying\"});fetch(\"\".concat(baseurl,\"/api/user\"),{method:\"GET\",headers:{authorization:\"\".concat(token)}}).then(function(data){return data.json();}).then(function(data){if(data&&data.user){_this2.setState({loggedIn:true,verified:true,user:data.user});}});}}},{key:\"render\",value:function render(){var user=this.state.user;return/*#__PURE__*/_jsx(_Fragment,{children:this.state.verified===\"verifying\"?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Loader,{content:\"Verifying User...\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\" loader m-12\"})})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"container font-sans\",children:[/*#__PURE__*/_jsx(Header,{handleLogIn:this.handleLogIn,user:this.state.user}),this.state.loggedIn?/*#__PURE__*/_jsx(Authenticated,{user:user,loggedIn:this.state.loggedIn,updateUser:this.updateUser}):/*#__PURE__*/_jsx(Unauthenticated,{user:user,loggedIn:this.state.loggedIn,handleLogIn:this.handleLogIn})]})});}}]);return App;}(React.Component);function Authenticated(props){return/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{exact:true,path:\"/\",children:/*#__PURE__*/_jsx(Home,{loggedIn:props.loggedIn,author:props.user.username,user:props.user})}),/*#__PURE__*/_jsx(Route,{path:\"/new-post\",children:/*#__PURE__*/_jsx(NewPost,{token:props.user.token})}),/*#__PURE__*/_jsx(Route,{path:\"/settings\",children:/*#__PURE__*/_jsx(Settings,{user:props.user,token:props.user.token,updateUser:props.updateUser})}),/*#__PURE__*/_jsx(Route,{path:\"/profiles/:username\",children:/*#__PURE__*/_jsx(Profile,{user:props.user})}),/*#__PURE__*/_jsx(Route,{path:\"/articles/:slug\",children:/*#__PURE__*/_jsx(Article,{user:props.user})}),/*#__PURE__*/_jsx(Route,{path:\"/edit-article\",children:/*#__PURE__*/_jsx(EditArticle,{user:props.user})}),/*#__PURE__*/_jsx(Route,{path:\"*\",children:/*#__PURE__*/_jsx(NoMatch,{})})]});}function Unauthenticated(props){return/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{exact:true,path:\"/\",children:/*#__PURE__*/_jsx(Home,{})}),/*#__PURE__*/_jsx(Route,{path:\"/signup\",children:/*#__PURE__*/_jsx(Signup,{handleLogIn:props.handleLogIn})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",children:/*#__PURE__*/_jsx(Login,{handleLogIn:props.handleLogIn})}),/*#__PURE__*/_jsx(Route,{path:\"/articles/:slug\",component:Article}),/*#__PURE__*/_jsx(Route,{path:\"/profiles/:username\",children:/*#__PURE__*/_jsx(Profile,{user:props.user})}),/*#__PURE__*/_jsx(Route,{path:\"*\",children:/*#__PURE__*/_jsx(NoMatch,{})})]});}export default App;","map":{"version":3,"names":["React","Route","Switch","Header","Home","Login","Signup","Article","NoMatch","Loader","Profile","Settings","NewPost","EditArticle","baseurl","App","state","loggedIn","user","verified","handleLogIn","setState","updateUser","token","JSON","parse","localStorage","getItem","fetch","method","headers","authorization","then","data","json","Component","Authenticated","props","username","Unauthenticated"],"sources":["/home/somanshu/Desktop/altcampus/REACT/blog-app/blog-app/src/components/app.js"],"sourcesContent":["import React from \"react\";\nimport { Route, Switch } from \"react-router-dom\";\nimport \"../styles/index.css\";\nimport Header from \"./header\";\nimport Home from \"./home\";\nimport Login from \"./login\";\nimport Signup from \"./signup\";\nimport Article from \"./singleArticle\";\nimport NoMatch from \"./noMatch\";\nimport Loader from \"./loader\";\nimport Profile from \"./profile\";\nimport Settings from \"./settings\";\nimport NewPost from \"./newPost\";\nimport EditArticle from \"./editArticle\";\nimport baseurl from \"../utils/constants\";\n\nclass App extends React.Component {\n  state = {\n    loggedIn: false,\n    user: null,\n    verified: false,\n  };\n  componentDidMount() {\n    const token = JSON.parse(localStorage.getItem(\"userToken\"));\n    if (token) {\n      this.setState({\n        verified: \"verifying\",\n      });\n      fetch(`${baseurl}/api/user`, {\n        method: \"GET\",\n        headers: {\n          authorization: `${token}`,\n        },\n      })\n        .then((data) => {\n          return data.json();\n        })\n        .then((data) => {\n          if (data && data.user) {\n            this.setState({\n              loggedIn: true,\n              verified: true,\n              user: data.user,\n            });\n          }\n        });\n    }\n  }\n  handleLogIn = (user) => {\n    this.setState({\n      loggedIn: !this.state.loggedIn,\n      user: user,\n    });\n  };\n  updateUser = (user) => {\n    this.setState({\n      user: user,\n    });\n  };\n  render() {\n    const user = this.state.user;\n\n    return (\n      <>\n        {this.state.verified === \"verifying\" ? (\n          <>\n            <Loader content=\"Verifying User...\" />\n            <div className=\"flex justify-center\">\n              <div className=\" loader m-12\"></div>\n            </div>\n          </>\n        ) : (\n          <div className=\"container font-sans\">\n            <Header handleLogIn={this.handleLogIn} user={this.state.user} />\n            {this.state.loggedIn ? (\n              <Authenticated\n                user={user}\n                loggedIn={this.state.loggedIn}\n                updateUser={this.updateUser}\n              />\n            ) : (\n              <Unauthenticated\n                user={user}\n                loggedIn={this.state.loggedIn}\n                handleLogIn={this.handleLogIn}\n              />\n            )}\n          </div>\n        )}\n      </>\n    );\n  }\n}\n\nfunction Authenticated(props) {\n  return (\n    <Switch>\n      <Route exact path=\"/\">\n        <Home\n          loggedIn={props.loggedIn}\n          author={props.user.username}\n          user={props.user}\n        />\n      </Route>\n      <Route path=\"/new-post\">\n        <NewPost token={props.user.token} />\n      </Route>\n      <Route path=\"/settings\">\n        <Settings\n          user={props.user}\n          token={props.user.token}\n          updateUser={props.updateUser}\n        />\n      </Route>\n      <Route path=\"/profiles/:username\">\n        <Profile user={props.user} />\n      </Route>\n      <Route path=\"/articles/:slug\">\n        <Article user={props.user} />\n      </Route>\n      <Route path=\"/edit-article\">\n        <EditArticle user={props.user} />\n      </Route>\n      <Route path=\"*\">\n        <NoMatch />\n      </Route>\n    </Switch>\n  );\n}\nfunction Unauthenticated(props) {\n  return (\n    <Switch>\n      <Route exact path=\"/\">\n        <Home />\n      </Route>\n      <Route path=\"/signup\">\n        <Signup handleLogIn={props.handleLogIn} />\n      </Route>\n      <Route path=\"/login\">\n        <Login handleLogIn={props.handleLogIn} />\n      </Route>\n      <Route path=\"/articles/:slug\" component={Article}></Route>\n      <Route path=\"/profiles/:username\">\n        <Profile user={props.user} />\n      </Route>\n      <Route path=\"*\">\n        <NoMatch />\n      </Route>\n    </Switch>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}